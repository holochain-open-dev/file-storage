"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withTimeout = void 0;
/**
 * Wraps a Promise with a timeout, rejecing the promise with the timeout.
 */
function withTimeout(promise, message, timeout) {
    return new Promise((resolve, reject) => {
        if (!(promise instanceof Promise)) {
            resolve();
            return;
        }
        const timeoutId = setTimeout(() => {
            reject(new Error(message));
        }, timeout);
        promise
            .then(val => {
            resolve(val);
        })
            .catch(err => {
            reject(err);
        })
            .finally(() => {
            clearTimeout(timeoutId);
        });
    });
}
exports.withTimeout = withTimeout;
//# sourceMappingURL=async.js.map