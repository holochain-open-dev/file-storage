"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBrowserLabel = exports.getBrowserName = exports.withTimeout = void 0;
/**
 * Wraps a Promise with a timeout, rejecing the promise with the timeout.
 */
function withTimeout(promise, message, timeout) {
    return new Promise((resolve, reject) => {
        const timeoutId = setTimeout(() => {
            reject(new Error(message));
        }, timeout);
        promise
            .then(val => {
            resolve(val);
        })
            .catch(err => {
            reject(err);
        })
            .finally(() => {
            clearTimeout(timeoutId);
        });
    });
}
exports.withTimeout = withTimeout;
const isDefined = (_) => !!_;
function getPlatform(c) {
    return (c.getPlatform() ||
        c.get('platform') ||
        [c.get('os'), c.get('os_version')].filter(isDefined).join(' '));
}
function getBrowserName(c) {
    return c.getBrowserName() || c.get('browserName') || c.get('browser_name');
}
exports.getBrowserName = getBrowserName;
function getBrowserVersion(c) {
    return c.getBrowserVersion() || c.get('browserVersion') || c.get('browser_version');
}
function getBrowserLabel(c) {
    return [getPlatform(c), getBrowserName(c), getBrowserVersion(c)].filter(_ => _).join(' ');
}
exports.getBrowserLabel = getBrowserLabel;
//# sourceMappingURL=utils.js.map