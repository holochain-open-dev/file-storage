/// <reference types="ws" />
import Websocket from "isomorphic-ws";
import { AppSignalCb } from "../api/app";
/**
 * A Websocket client which can make requests and receive responses,
 * as well as send and receive signals
 *
 * Uses Holochain's websocket WireMessage for communication.
 */
export declare class WsClient {
    socket: Websocket;
    pendingRequests: Record<number, {
        fulfill: Function;
        reject: Function;
    }>;
    index: number;
    alreadyWarnedNoSignalCb: boolean;
    constructor(socket: any, signalCb?: AppSignalCb);
    emitSignal(data: any): void;
    request<Req, Res>(data: Req): Promise<Res>;
    handleResponse(msg: any): void;
    close(): Promise<void>;
    awaitClose(): Promise<void>;
    static connect(url: string, signalCb?: AppSignalCb): Promise<WsClient>;
}
