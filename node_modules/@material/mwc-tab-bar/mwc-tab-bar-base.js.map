{"version":3,"file":"mwc-tab-bar-base.js","sourceRoot":"","sources":["mwc-tab-bar-base.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n// Make TypeScript not remove the imports.\nimport '@material/mwc-tab';\nimport '@material/mwc-tab-scroller';\n\nimport {BaseElement} from '@material/mwc-base/base-element';\nimport {observer} from '@material/mwc-base/observer';\nimport {Tab} from '@material/mwc-tab';\nimport {TabScroller} from '@material/mwc-tab-scroller';\nimport {MDCTabBarAdapter} from '@material/tab-bar/adapter';\nimport MDCTabBarFoundation from '@material/tab-bar/foundation';\nimport {MDCTabInteractionEvent} from '@material/tab/types';\nimport {html, property, query} from 'lit-element';\n\nexport class TabBarBase extends BaseElement {\n  protected mdcFoundation!: MDCTabBarFoundation;\n\n  protected readonly mdcFoundationClass = MDCTabBarFoundation;\n\n  @query('.mdc-tab-bar') protected mdcRoot!: HTMLElement;\n\n  @query('mwc-tab-scroller') protected scrollerElement!: TabScroller;\n\n  // tabsSlot should have type HTMLSlotElement, but when TypeScript's\n  // emitDecoratorMetadata is enabled, the HTMLSlotElement constructor will\n  // be emitted into the runtime, which will cause an \"HTMLSlotElement is\n  // undefined\" error in browsers that don't define it (e.g. IE11).\n  @query('slot') protected tabsSlot!: HTMLElement;\n\n  @observer(async function(this: TabBarBase) {\n    await this.updateComplete;\n    // only provoke the foundation if we are out of sync with it, i.e.\n    // ignore an foundation generated set.\n    // use `activeIndex` directly to avoid staleness if it was set before the\n    // first render.\n    if (this.activeIndex !== this._previousActiveIndex) {\n      this.mdcFoundation.activateTab(this.activeIndex);\n    }\n  })\n  @property({type: Number})\n  activeIndex = 0;\n\n  private _previousActiveIndex = -1;\n\n  private _handleTabInteraction(e: MDCTabInteractionEvent) {\n    this.mdcFoundation.handleTabInteraction(e);\n  }\n\n  private _handleKeydown(e: KeyboardEvent) {\n    this.mdcFoundation.handleKeyDown(e);\n  }\n\n  // TODO(sorvell): can scroller be optional for perf?\n  protected render() {\n    return html`\n      <div class=\"mdc-tab-bar\" role=\"tablist\"\n          @MDCTab:interacted=\"${this._handleTabInteraction}\"\n          @keydown=\"${this._handleKeydown}\">\n        <mwc-tab-scroller><slot></slot></mwc-tab-scroller>\n      </div>\n      `;\n  }\n\n  // TODO(sorvell): probably want to memoize this and use a `slotChange` event\n  private _getTabs() {\n    return (this.tabsSlot as HTMLSlotElement)\n               .assignedNodes({flatten: true})\n               .filter((e: Node) => e instanceof Tab) as Tab[];\n  }\n\n  private _getTab(index: number) {\n    return this._getTabs()[index];\n  }\n\n  protected createAdapter(): MDCTabBarAdapter {\n    return {\n      scrollTo: (scrollX: number) =>\n          this.scrollerElement.scrollToPosition(scrollX),\n      incrementScroll: (scrollXIncrement: number) =>\n          this.scrollerElement.incrementScrollPosition(scrollXIncrement),\n      getScrollPosition: () => this.scrollerElement.getScrollPosition(),\n      getScrollContentWidth: () => this.scrollerElement.getScrollContentWidth(),\n      getOffsetWidth: () => this.mdcRoot.offsetWidth,\n      isRTL: () => window.getComputedStyle(this.mdcRoot)\n                       .getPropertyValue('direction') === 'rtl',\n      setActiveTab: (index: number) => this.mdcFoundation.activateTab(index),\n      activateTabAtIndex: (index: number, clientRect: ClientRect) => {\n        const tab = this._getTab(index);\n        if (tab !== undefined) {\n          tab.activate(clientRect);\n        }\n        this._previousActiveIndex = index;\n      },\n      deactivateTabAtIndex: (index: number) => {\n        const tab = this._getTab(index);\n        if (tab !== undefined) {\n          tab.deactivate();\n        }\n      },\n      focusTabAtIndex: (index: number) => {\n        const tab = this._getTab(index);\n        if (tab !== undefined) {\n          tab.focus();\n        }\n      },\n      // TODO(sorvell): tab may not be able to synchronously answer\n      // `computeIndicatorClientRect` if an update is pending or it has not yet\n      // updated. If this is necessary, LitElement may need a `forceUpdate`\n      // method.\n      getTabIndicatorClientRectAtIndex: (index: number) => {\n        const tab = this._getTab(index);\n        return tab !== undefined ? tab.computeIndicatorClientRect() :\n                                   new DOMRect();\n      },\n      getTabDimensionsAtIndex: (index: number) => {\n        const tab = this._getTab(index);\n        return tab !== undefined ?\n            tab.computeDimensions() :\n            {rootLeft: 0, rootRight: 0, contentLeft: 0, contentRight: 0};\n      },\n      getPreviousActiveTabIndex: () => {\n        return this._previousActiveIndex;\n      },\n      getFocusedTabIndex: () => {\n        const tabElements = this._getTabs();\n        const activeElement =\n            (this.getRootNode() as ShadowRoot).activeElement as Tab;\n        return tabElements.indexOf(activeElement);\n      },\n      getIndexOfTabById: (id: string) => {\n        const tabElements = this._getTabs();\n        for (let i = 0; i < tabElements.length; i++) {\n          if (tabElements[i].id === id) {\n            return i;\n          }\n        }\n        return -1;\n      },\n      getTabListLength: () => this._getTabs().length,\n      notifyTabActivated: (index: number) => {\n        // Synchronize the tabs `activeIndex` to the foundation.\n        // This is needed when a tab is changed via a click, for example.\n        this.activeIndex = index;\n        this.dispatchEvent(new CustomEvent(\n            MDCTabBarFoundation.strings.TAB_ACTIVATED_EVENT,\n            {detail: {index}, bubbles: true, cancelable: true}));\n      },\n    };\n  }\n\n  protected firstUpdated() {\n    // NOTE: Delay creating foundation until scroller is fully updated.\n    // This is necessary because the foundation/adapter synchronously addresses\n    // the scroller element.\n  }\n  protected _getUpdateComplete() {\n    return super._getUpdateComplete()\n        .then(() => this.scrollerElement.updateComplete)\n        .then(() => {\n          if (this.mdcFoundation === undefined) {\n            this.createFoundation();\n          }\n        });\n  }\n\n  scrollIndexIntoView(index: number) {\n    this.mdcFoundation.scrollIntoView(index);\n  }\n}\n"]}