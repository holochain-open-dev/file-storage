{"version":3,"file":"mwc-menu-surface-base.js","sourceRoot":"","sources":["mwc-menu-surface-base.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2020 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {MDCMenuSurfaceAdapter} from '@material/menu-surface/adapter';\nimport {Corner as CornerEnum, CornerBit} from '@material/menu-surface/constants';\nimport MDCMenuSurfaceFoundation from '@material/menu-surface/foundation';\nimport {addHasRemoveClass, BaseElement} from '@material/mwc-base/base-element';\nimport {observer} from '@material/mwc-base/observer';\nimport {deepActiveElementPath, doesElementContainFocus} from '@material/mwc-base/utils';\nimport {html, internalProperty, property, query} from 'lit-element';\nimport {classMap} from 'lit-html/directives/class-map';\nimport {styleMap} from 'lit-html/directives/style-map';\n\nexport type Corner = keyof typeof CornerEnum;\nexport type AnchorableElement = HTMLElement&{anchor: Element | null};\nexport type MenuCorner = 'START'|'END';\n\n// tslint:disable:no-bitwise\n\n// required for closure compiler\nconst stringToCorner = {\n  'TOP_LEFT': CornerEnum.TOP_LEFT,\n  'TOP_RIGHT': CornerEnum.TOP_RIGHT,\n  'BOTTOM_LEFT': CornerEnum.BOTTOM_LEFT,\n  'BOTTOM_RIGHT': CornerEnum.BOTTOM_RIGHT,\n  'TOP_START': CornerEnum.TOP_START,\n  'TOP_END': CornerEnum.TOP_END,\n  'BOTTOM_START': CornerEnum.BOTTOM_START,\n  'BOTTOM_END': CornerEnum.BOTTOM_END,\n};\n\n/**\n * @fires opened\n * @fires closed\n */\nexport abstract class MenuSurfaceBase extends BaseElement {\n  protected mdcFoundation!: MDCMenuSurfaceFoundation;\n\n  protected readonly mdcFoundationClass = MDCMenuSurfaceFoundation;\n\n  @query('.mdc-menu-surface') mdcRoot!: HTMLDivElement;\n\n  @query('slot') slotElement!: HTMLSlotElement|null;\n\n  @property({type: Boolean})\n  @observer(function(this: MenuSurfaceBase, isAbsolute: boolean) {\n    if (this.mdcFoundation && !this.fixed) {\n      this.mdcFoundation.setIsHoisted(isAbsolute);\n    }\n  })\n  absolute = false;\n\n  @property({type: Boolean}) fullwidth = false;\n\n  @property({type: Boolean})\n  @observer(function(this: MenuSurfaceBase, isFixed: boolean) {\n    if (this.mdcFoundation && !this.absolute) {\n      this.mdcFoundation.setIsHoisted(isFixed);\n    }\n  })\n  fixed = false;\n\n  @property({type: Number})\n  @observer(function(this: MenuSurfaceBase, value: number|null) {\n    if (this.mdcFoundation && this.y !== null && value !== null) {\n      this.mdcFoundation.setAbsolutePosition(value, this.y);\n      this.mdcFoundation.setAnchorMargin(\n          {left: value, top: this.y, right: -value, bottom: this.y});\n    }\n  })\n  x: number|null = null;\n\n  @property({type: Number})\n  @observer(function(this: MenuSurfaceBase, value: number|null) {\n    if (this.mdcFoundation && this.x !== null && value !== null) {\n      this.mdcFoundation.setAbsolutePosition(this.x, value);\n      this.mdcFoundation.setAnchorMargin(\n          {left: this.x, top: value, right: -this.x, bottom: value});\n    }\n  })\n  y: number|null = null;\n\n  // must be defined before open or else race condition in foundation occurs.\n  @property({type: Boolean})\n  @observer(function(this: MenuSurfaceBase, value: boolean) {\n    if (this.mdcFoundation) {\n      this.mdcFoundation.setQuickOpen(value);\n    }\n  })\n  quick = false;\n\n  @property({type: Boolean, reflect: true})\n  @observer(function(this: MenuSurfaceBase, isOpen: boolean, wasOpen: boolean) {\n    if (this.mdcFoundation) {\n      if (isOpen) {\n        this.mdcFoundation.open();\n        // wasOpen helps with first render (when it is `undefined`) perf\n      } else if (wasOpen !== undefined) {\n        this.mdcFoundation.close();\n      }\n    }\n  })\n  open = false;\n\n  @internalProperty()\n  @observer(function(this: MenuSurfaceBase, value: CornerEnum) {\n    if (this.mdcFoundation) {\n      if (value) {\n        this.mdcFoundation.setAnchorCorner(value);\n      } else {\n        this.mdcFoundation.setAnchorCorner(value);\n      }\n    }\n  })\n\n  protected bitwiseCorner: CornerEnum = CornerEnum.TOP_START;\n  protected previousMenuCorner: MenuCorner|null = null;\n\n  // must be defined before observer of anchor corner for initialization\n  @property({type: String})\n  @observer(function(this: MenuSurfaceBase, value: MenuCorner) {\n    if (this.mdcFoundation) {\n      const isValidValue = value === 'START' || value === 'END';\n      const isFirstTimeSet = this.previousMenuCorner === null;\n      const cornerChanged =\n          !isFirstTimeSet && value !== this.previousMenuCorner;\n      const initiallySetToEnd = isFirstTimeSet && value === 'END';\n\n      if (isValidValue && (cornerChanged || initiallySetToEnd)) {\n        this.bitwiseCorner = this.bitwiseCorner ^ CornerBit.RIGHT;\n        this.mdcFoundation.flipCornerHorizontally();\n        this.previousMenuCorner = value;\n      }\n    }\n  })\n  menuCorner: MenuCorner = 'START';\n\n  @property({type: String})\n  @observer(function(this: MenuSurfaceBase, value: Corner) {\n    if (this.mdcFoundation) {\n      if (value) {\n        let newCorner = stringToCorner[value];\n        if (this.menuCorner === 'END') {\n          newCorner = newCorner ^ CornerBit.RIGHT;\n        }\n\n        this.bitwiseCorner = newCorner;\n      }\n    }\n  })\n  corner: Corner = 'TOP_START';\n\n  @internalProperty() protected styleTop = '';\n  @internalProperty() protected styleLeft = '';\n  @internalProperty() protected styleRight = '';\n  @internalProperty() protected styleBottom = '';\n  @internalProperty() protected styleMaxHeight = '';\n  @internalProperty() protected styleTransformOrigin = '';\n\n  anchor: HTMLElement|null = null;\n\n  protected previouslyFocused: HTMLElement|Element|null = null;\n  protected previousAnchor: HTMLElement|null = null;\n  protected onBodyClickBound: (evt: MouseEvent) => void = () => undefined;\n\n  render() {\n    const classes = {\n      'mdc-menu-surface--fixed': this.fixed,\n      'mdc-menu-surface--fullwidth': this.fullwidth,\n    };\n\n    const styles = {\n      'top': this.styleTop,\n      'left': this.styleLeft,\n      'right': this.styleRight,\n      'bottom': this.styleBottom,\n      'max-height': this.styleMaxHeight,\n      'transform-origin': this.styleTransformOrigin,\n    };\n\n    return html`\n      <div\n          class=\"mdc-menu-surface ${classMap(classes)}\"\n          style=\"${styleMap(styles)}\"\n          @keydown=${this.onKeydown}\n          @opened=${this.registerBodyClick}\n          @closed=${this.deregisterBodyClick}>\n        <slot></slot>\n      </div>`;\n  }\n\n  createAdapter(): MDCMenuSurfaceAdapter {\n    return {\n      ...addHasRemoveClass(this.mdcRoot),\n      hasAnchor: () => {\n        return !!this.anchor;\n      },\n      notifyClose: () => {\n        const init: CustomEventInit = {bubbles: true, composed: true};\n        const ev = new CustomEvent('closed', init);\n        this.open = false;\n        this.mdcRoot.dispatchEvent(ev);\n      },\n      notifyOpen: () => {\n        const init: CustomEventInit = {bubbles: true, composed: true};\n        const ev = new CustomEvent('opened', init);\n        this.open = true;\n        this.mdcRoot.dispatchEvent(ev);\n      },\n      isElementInContainer: () => false,\n      isRtl: () => {\n        if (this.mdcRoot) {\n          return getComputedStyle(this.mdcRoot).direction === 'rtl';\n        }\n\n        return false;\n      },\n      setTransformOrigin: (origin) => {\n        const root = this.mdcRoot;\n        if (!root) {\n          return;\n        }\n\n        this.styleTransformOrigin = origin;\n      },\n      isFocused: () => {\n        return doesElementContainFocus(this);\n      },\n      saveFocus: () => {\n        const activeElementPath = deepActiveElementPath();\n        const pathLength = activeElementPath.length;\n\n        if (!pathLength) {\n          this.previouslyFocused = null;\n        }\n\n        this.previouslyFocused = activeElementPath[pathLength - 1];\n      },\n      restoreFocus: () => {\n        if (!this.previouslyFocused) {\n          return;\n        }\n\n        if ('focus' in this.previouslyFocused) {\n          this.previouslyFocused.focus();\n        }\n      },\n      getInnerDimensions: () => {\n        const mdcRoot = this.mdcRoot;\n\n        if (!mdcRoot) {\n          return {width: 0, height: 0};\n        }\n\n        return {width: mdcRoot.offsetWidth, height: mdcRoot.offsetHeight};\n      },\n      getAnchorDimensions: () => {\n        const anchorElement = this.anchor;\n\n        return anchorElement ? anchorElement.getBoundingClientRect() : null;\n      },\n      getBodyDimensions: () => {\n        return {\n          width: document.body.clientWidth,\n          height: document.body.clientHeight,\n        };\n      },\n      getWindowDimensions: () => {\n        return {\n          width: window.innerWidth,\n          height: window.innerHeight,\n        };\n      },\n      getWindowScroll: () => {\n        return {\n          x: window.pageXOffset,\n          y: window.pageYOffset,\n        };\n      },\n      setPosition: (position) => {\n        const mdcRoot = this.mdcRoot;\n\n        if (!mdcRoot) {\n          return;\n        }\n\n        this.styleLeft = 'left' in position ? `${position.left}px` : '';\n        this.styleRight = 'right' in position ? `${position.right}px` : '';\n        this.styleTop = 'top' in position ? `${position.top}px` : '';\n        this.styleBottom = 'bottom' in position ? `${position.bottom}px` : '';\n      },\n      setMaxHeight: async (height) => {\n        const mdcRoot = this.mdcRoot;\n\n        if (!mdcRoot) {\n          return;\n        }\n\n        // must set both for IE support as IE will not set a var\n        this.styleMaxHeight = height;\n        await this.updateComplete;\n        this.styleMaxHeight = `var(--mdc-menu-max-height, ${height})`;\n      },\n    };\n  }\n\n  protected onKeydown(evt: KeyboardEvent) {\n    if (this.mdcFoundation) {\n      this.mdcFoundation.handleKeydown(evt);\n    }\n  }\n\n  protected onBodyClick(evt: MouseEvent) {\n    const path = evt.composedPath();\n    if (path.indexOf(this) === -1) {\n      this.close();\n    }\n  }\n\n  protected registerBodyClick() {\n    this.onBodyClickBound = this.onBodyClick.bind(this);\n    // capture otherwise listener closes menu after quick menu opens\n    document.body.addEventListener(\n        'click', this.onBodyClickBound, {passive: true, capture: true});\n  }\n\n  protected deregisterBodyClick() {\n    document.body.removeEventListener(\n        'click', this.onBodyClickBound, {capture: true});\n  }\n\n  close() {\n    this.open = false;\n  }\n\n  show() {\n    this.open = true;\n  }\n}\n"]}