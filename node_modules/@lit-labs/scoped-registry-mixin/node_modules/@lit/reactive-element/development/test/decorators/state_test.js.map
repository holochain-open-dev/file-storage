{"version":3,"file":"state_test.js","sourceRoot":"","sources":["../../../src/test/decorators/state_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {ReactiveElement, PropertyValues} from '../../reactive-element.js';\nimport {state} from '../../decorators/state.js';\nimport {generateElementName} from '../test-helpers.js';\nimport {assert} from '@esm-bundle/chai';\n\nsuite('@state', () => {\n  let container: HTMLElement;\n  let el: E;\n\n  const hasChanged = (value: any, old: any) => old === undefined || value > old;\n\n  class E extends ReactiveElement {\n    @state() prop = 'prop';\n    @state({hasChanged}) hasChangedProp = 10;\n\n    updateCount = 0;\n\n    update(changed: PropertyValues) {\n      this.updateCount++;\n      super.update(changed);\n    }\n  }\n  customElements.define(generateElementName(), E);\n\n  setup(async () => {\n    container = document.createElement('div');\n    container.id = 'test-container';\n    document.body.appendChild(container);\n    el = new E();\n    container.appendChild(el);\n    await el.updateComplete;\n  });\n\n  teardown(() => {\n    if (container !== undefined) {\n      container.parentElement!.removeChild(container);\n      (container as any) = undefined;\n    }\n  });\n\n  test('triggers update', async () => {\n    assert.equal(el.updateCount, 1);\n    el.prop = 'change';\n    await el.updateComplete;\n    assert.equal(el.updateCount, 2);\n  });\n\n  test('uses hasChanged', async () => {\n    assert.equal(el.updateCount, 1);\n    el.hasChangedProp = 100;\n    await el.updateComplete;\n    assert.equal(el.updateCount, 2);\n    el.hasChangedProp = 0;\n    await el.updateComplete;\n    assert.equal(el.updateCount, 2);\n  });\n\n  test('does not set via attribute', async () => {\n    el.setAttribute('prop', 'attr');\n    assert.equal(el.prop, 'prop');\n    await el.updateComplete;\n    assert.equal(el.updateCount, 1);\n  });\n});\n"]}