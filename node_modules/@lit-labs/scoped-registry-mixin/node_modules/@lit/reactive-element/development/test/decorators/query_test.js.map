{"version":3,"file":"query_test.js","sourceRoot":"","sources":["../../../src/test/decorators/query_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {query} from '../../decorators/query.js';\nimport {\n  canTestReactiveElement,\n  generateElementName,\n  RenderingElement,\n  html,\n} from '../test-helpers.js';\nimport {assert} from '@esm-bundle/chai';\n\n(canTestReactiveElement ? suite : suite.skip)('@query', () => {\n  let container: HTMLElement;\n  let el: C;\n\n  class C extends RenderingElement {\n    @query('#blah') div?: HTMLDivElement;\n    @query('#blah', true) divCached?: HTMLDivElement;\n    @query('span', true) span?: HTMLSpanElement;\n\n    static properties = {condition: {}};\n\n    declare condition: boolean;\n\n    constructor() {\n      super();\n      // Avoiding class fields for Babel compat.\n      this.condition = false;\n    }\n\n    render() {\n      return html`\n        <div>Not this one</div>\n        <div id=\"blah\">This one</div>\n        ${this.condition ? html`<span>Cached</span>` : ``}\n      `;\n    }\n  }\n  customElements.define(generateElementName(), C);\n\n  setup(async () => {\n    container = document.createElement('div');\n    container.id = 'test-container';\n    document.body.appendChild(container);\n    el = new C();\n    container.appendChild(el);\n    await el.updateComplete;\n  });\n\n  teardown(() => {\n    if (container !== undefined) {\n      container.parentElement!.removeChild(container);\n      (container as any) = undefined;\n    }\n  });\n\n  test('returns an element when it exists', () => {\n    const div = el.div;\n    assert.instanceOf(div, HTMLDivElement);\n    assert.equal(div!.innerText, 'This one');\n  });\n\n  test('returns null when no match', () => {\n    assert.isNull(el.span);\n  });\n\n  test('returns cached value', async () => {\n    el.condition = true;\n    await el.updateComplete;\n    // trigger caching, so we can verify that multiple elements can be cached\n    el.divCached;\n    assert.equal(\n      el.divCached,\n      el.renderRoot.querySelector('#blah') as HTMLDivElement\n    );\n    assert.equal(el.span, el.renderRoot.querySelector('span'));\n    assert.instanceOf(el.span, HTMLSpanElement);\n    el.condition = false;\n    await el.updateComplete;\n    assert.instanceOf(el.span, HTMLSpanElement);\n    assert.notEqual(el.span, el.renderRoot.querySelector('span'));\n  });\n});\n"]}